<h1>クリックしたプロフィール詳細情報</h1>

<% if @profile.icon.present? %>
  <%= image_tag @profile.icon.url, class: 'profile-icon' %>
<% else %>
  <% default_icon = Profile.default_icons.sample %>
  <%= image_tag default_icon, class: 'profile-icon' %>
<% end %>

<% if @favorite.present? %>
  <%= link_to 'お気に入り解除する', favorites_path(profile_id: @profile.id), method: :delete, remote: true, class: 'btn btn-danger', id: "js-favorites-delete-button" %>
<% else %>
  <%= link_to 'お気に入りする', favorites_path(profile_id: @profile.id), method: :post, remote: true, class: 'btn btn-primary', id: "js-favorites-create-button" %>
<% end %>

<h2><%= @profile.name %>さんとの相性</h2>
<p>相性率: <%= @love_match %>%</p>

  <table>
    <thead>
      <tr>
        <th>名前</th>
        <th>性別</th>
        <th>年齢</th>
        <th>仕事</th>
        <th>趣味</th>
        <th>好きなこと</th>
        <th>一言</th>
      </tr>
    </thead>


    <tbody>
          <tr>
            <td><%= @profile.name %></td>
            <td><%= @profile.sex %></td>
            <td><%= @profile.age %>歳</td>
            <td><%= @profile.work %></td>
            <td><%= @profile.hobby %></td>
            <td><%= @profile.likes %></td>
            <td><%= @profile.comment %></td>
            <% if @profile.user == current_user %>
            <td><%= link_to 'Edit', edit_profile_path(@profile) %></td>
            <td><%= link_to 'Destroy', @profile, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% else %>
          <td></td>
          <td></td>
          <% end %>
          </tr>
    </tbody>
  </table>

<% if current_user.following?(@profile.user) %>
  <%= link_to "フォローを外す", user_relationships_path(@profile.user.id), method: :delete %>
<% else %>
  <%= link_to "フォローする", user_relationships_path(@profile.user.id), method: :post %>
<% end %>

<% if current_user.following?(@profile.user) && @profile.user.following?(current_user) %>
  <%= link_to 'DMを始める', rooms_path(sender_id: current_user.id, recipient_id: @profile.user.id), method: :post, class: "ml-3" %>
<% end %>

<br>
<%= link_to '戻る', profiles_path %>
<br>